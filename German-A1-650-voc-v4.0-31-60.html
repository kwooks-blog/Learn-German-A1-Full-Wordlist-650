<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Word Quiz Game</title>
  <style>
    body {
      background: #f0f8ff;
      text-align: center;
      padding: 20px;
    }
    .card {
      border: 3px dashed #ffa500;
      border-radius: 30px;
      background: #fff8dc;
      padding: 40px;
      margin: 40px auto;
      width: 90%;
      max-width: 500px;
      box-shadow: 4px 4px 15px rgba(0,0,0,0.2);
    }
    h1 {
      color: #ff69b4;
      font-size: 2.2em;
    }
    .question {
      font-size: 1.5em;
      margin-bottom: 20px;
    }
    input, button, select {
      font-size: 1.2em;
      padding: 10px;
      margin: 10px;
      border-radius: 10px;
    }
    .feedback {
      font-weight: bold;
      margin-top: 15px;
    }
    .cute {
      font-size: 3em;
    }
  </style>
</head>
<body>
  <h1>Word Quiz Game ğŸ¢â­</h1>
  <div id="quiz" class="card"></div>
  <div id="score" class="card" style="display:none;"></div>
  <script>
    const words = [
      ["aussehen", "look like (ë‹®ë‹¤)"],
      ["aussteigen", "get out (ë‚´ë¦¬ë‹¤)"],
      ["sich ausziehen", "undress (ë²—ë‹¤)"],
      ["sich Ã¤rgern", "get angry (í™”ë‚˜ë‹¤)"],
      ["baden", "take a bath (ëª©ìš•í•˜ë‹¤)"],
      ["bedeuten", "mean (ì˜ë¯¸í•˜ë‹¤)"],
      ["beginnen", "begin (ì‹œì‘í•˜ë‹¤)"],
      ["bekommen", "get (ë°›ë‹¤)"],
      ["benutzen", "use (ì‚¬ìš©í•˜ë‹¤)"],
      ["bestellen", "order (ì£¼ë¬¸í•˜ë‹¤)"],
      ["besuchen", "visit (ë°©ë¬¸í•˜ë‹¤)"],
      ["bezahlen", "pay (ì§€ë¶ˆí•˜ë‹¤)"],
      ["bitten", "ask/request (ë¶€íƒí•˜ë‹¤)"],
      ["bleiben", "stay (ë¨¸ë¬´ë¥´ë‹¤)"],
      ["brauchen", "need (í•„ìš”í•˜ë‹¤)"],
      ["bringen", "bring (ê°€ì ¸ì˜¤ë‹¤)"],
      ["buchstabieren", "spell (ì² ìë¥¼ ë§í•˜ë‹¤)"],
      ["danken", "thank (ê°ì‚¬í•˜ë‹¤)"],
      ["denken", "think (ìƒê°í•˜ë‹¤)"],
      ["drucken", "print (ì¸ì‡„í•˜ë‹¤)"],
      ["drÃ¼cken", "press (ëˆ„ë¥´ë‹¤)"],
      ["dÃ¼rfen", "be allowed (í—ˆë½ë˜ë‹¤)"],
      ["einkaufen", "shop (ì‡¼í•‘í•˜ë‹¤)"],
      ["einladen", "invite (ì´ˆëŒ€í•˜ë‹¤)"],
      ["einsteigen", "get in (íƒ‘ìŠ¹í•˜ë‹¤)"],
      ["empfehlen", "recommend (ì¶”ì²œí•˜ë‹¤)"],
      ["entschuldigen", "apologize (ì‚¬ê³¼í•˜ë‹¤)"],
      ["erklÃ¤ren", "explain (ì„¤ëª…í•˜ë‹¤)"],
      ["erlauben", "allow (í—ˆë½í•˜ë‹¤)"],
      ["erzÃ¤hlen", "tell (ì´ì•¼ê¸°í•˜ë‹¤)"],
      ["essen", "eat (ë¨¹ë‹¤)"]
    ];

    let index = 0;
    let score = 0;
    let stage = 0;

    const quizEl = document.getElementById("quiz");
    const scoreEl = document.getElementById("score");

    function maskWord(word, percent) {
      let len = word.length;
      let maskCount = Math.floor(len * percent);
      let indexes = [];
      while(indexes.length < maskCount) {
        let i = Math.floor(Math.random() * len);
        if (!indexes.includes(i) && word[i] !== ' ') indexes.push(i);
      }
      return [...word].map((c, i) => indexes.includes(i) ? '_' : c).join('');
    }

    function speak(text) {
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = 'de-DE';
      speechSynthesis.speak(utter);
    }

    function showQuestion() {
      if (index >= words.length) {
        if (++stage < 4) {
          index = 0;
        } else {
          quizEl.style.display = 'none';
          scoreEl.style.display = 'block';
          scoreEl.innerHTML = `<h2>ğŸ‰ ì´ì : ${score} / ${words.length * 10 * 4}ì </h2>`;
          return;
        }
      }

      let [word, meaning] = words[index];
      let content = `<div class="question">`;
      speak(word);

      if (stage === 0) {
        let choices = [meaning];
        while (choices.length < 4) {
          let m = words[Math.floor(Math.random() * words.length)][1];
          if (!choices.includes(m)) choices.push(m);
        }
        choices.sort(() => Math.random() - 0.5);
        content += `<p><strong>${word}</strong> ì˜ ëœ»ì€?</p>`;
        choices.forEach(choice => {
          content += `<button onclick="checkAnswer('${choice}', '${meaning}')">${choice}</button><br/>`;
        });
      } else {
        const percent = [0.2, 0.5, 1][stage - 1];
        content += `<p><strong>${meaning}</strong> ì— í•´ë‹¹í•˜ëŠ” ë‹¨ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”:</p>`;
        content += `<input type="text" id="answer" placeholder="${maskWord(word, percent)}" />`;
        content += `<br/><button onclick="checkAnswer(document.getElementById('answer').value.trim(), '${word}')">ì œì¶œ</button>`;
      }
      content += `<div class="feedback" id="feedback"></div></div>`;
      quizEl.innerHTML = content;
    }

    function checkAnswer(user, correct) {
      const fb = document.getElementById("feedback");
      if (user.toLowerCase() === correct.toLowerCase()) {
        fb.innerHTML = "âœ… ì •ë‹µì…ë‹ˆë‹¤!";
        score += 10;
      } else {
        fb.innerHTML = `âŒ ì˜¤ë‹µì…ë‹ˆë‹¤. ì •ë‹µì€ <strong>${correct}</strong> ì…ë‹ˆë‹¤.`;
      }
      index++;
      setTimeout(showQuestion, 1500);
    }

    showQuestion();
  </script>
</body>
</html>
