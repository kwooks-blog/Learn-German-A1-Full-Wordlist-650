<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë…ì¼ì–´ ë§¤ì¹­ ê²Œì„ - 2ë‹¨ê³„ ëª¨ë“œ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: sans-serif;
      background: #222;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    h2 {
      color: #1e90ff;
    }
    .container {
      display: flex;
      gap: 50px;
      margin-top: 30px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .item {
      background: #444;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      text-align: center;
    }
    .item:hover {
      background: #666;
    }
    .matched {
      background: limegreen !important;
      color: white;
    }
    .wrong {
      background: tomato !important;
    }
    .progress {
      margin-top: 10px;
      font-size: 16px;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      background: #1e90ff;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>ë…ì¼ì–´ A1 ë™ì‚¬ ë§¤ì¹­ ê²Œì„ - 2ë‹¨ê³„ ëª¨ë“œ</h2>
  <div class="progress" id="progress"></div>
  <div class="container">
    <div id="germanList" class="list"></div>
    <div id="meaningList" class="list"></div>
  </div>
  <button onclick="startStage2()">2ë‹¨ê³„ ëª¨ë“œ ì‹œì‘</button>
  <button onclick="nextRound()">ë‹¤ìŒ</button>

  <script>
    const allWords = [
      { german: 'sein', meaning: 'to be (ì´ë‹¤)' },
      { german: 'haben', meaning: 'to have (ê°€ì§€ë‹¤)' },
      { german: 'werden', meaning: 'to become (~ì´ ë˜ë‹¤)' },
      { german: 'kÃ¶nnen', meaning: 'can (~í•  ìˆ˜ ìˆë‹¤)' },
      { german: 'mÃ¼ssen', meaning: 'must (í•´ì•¼ í•œë‹¤)' },
      { german: 'sollen', meaning: 'should (~í•´ì•¼ í•œë‹¤)' },
      { german: 'wollen', meaning: 'want (ì›í•˜ë‹¤)' },
      { german: 'dÃ¼rfen', meaning: 'be allowed to (í—ˆë½ë°›ë‹¤)' },
      { german: 'mÃ¶gen', meaning: 'like (ì¢‹ì•„í•˜ë‹¤)' },
      { german: 'abfahren', meaning: 'depart (ì¶œë°œí•˜ë‹¤)' },
      { german: 'abgeben', meaning: 'hand over (ì œì¶œí•˜ë‹¤)' },
      { german: 'abholen', meaning: 'pick up (ë°ë¦¬ëŸ¬ ê°€ë‹¤)' },
      { german: 'abschlieÃŸen', meaning: 'lock (ì ê·¸ë‹¤)' },
      { german: 'anbieten', meaning: 'offer (ì œê³µí•˜ë‹¤)' },
      { german: 'anfangen', meaning: 'begin (ì‹œì‘í•˜ë‹¤)' },
      { german: 'ankommen', meaning: 'arrive (ë„ì°©í•˜ë‹¤)' },
      { german: 'ankreuzen', meaning: 'tick (ì²´í¬í•˜ë‹¤)' },
      { german: 'anmachen', meaning: 'turn on (ì¼œë‹¤)' },
      { german: 'anmelden', meaning: 'register (ë“±ë¡í•˜ë‹¤)' },
      { german: 'anrufen', meaning: 'call (ì „í™”í•˜ë‹¤)' },
      { german: 'antworten', meaning: 'reply (ëŒ€ë‹µí•˜ë‹¤)' },
      { german: 'anziehen', meaning: 'put on (ì…ë‹¤)' },
      { german: 'arbeiten', meaning: 'work (ì¼í•˜ë‹¤)' },
      { german: 'aufhÃ¶ren', meaning: 'stop (ë©ˆì¶”ë‹¤)' },
      { german: 'aufmachen', meaning: 'open (ì—´ë‹¤)' },
      { german: 'aufrÃ¤umen', meaning: 'clean up (ì •ë¦¬í•˜ë‹¤)' },
      { german: 'aufstehen', meaning: 'get up (ì¼ì–´ë‚˜ë‹¤)' },
      { german: 'ausfÃ¼llen', meaning: 'fill out (ì‘ì„±í•˜ë‹¤)' },
      { german: 'ausmachen', meaning: 'turn off (ë„ë‹¤)' },
      { german: 'aussehen', meaning: 'look like (~ì²˜ëŸ¼ ë³´ì´ë‹¤)' }
    ];

    let wordCounts = {};
    let correctCounts = {};
    let selectedGerman = null;
    let selectedMeaning = null;

    function startStage2() {
      wordCounts = {};
      correctCounts = {};
      allWords.forEach(w => {
        wordCounts[w.german] = 0;
        correctCounts[w.german] = 0;
      });
      nextRound();
    }

    function updateProgress() {
      const progress = document.getElementById('progress');
      const summary = allWords.map(w => `${w.german}: ${correctCounts[w.german]}/5`).join(' | ');
      progress.textContent = `ì§„í–‰ ìƒí™©: ${summary}`;
    }

    function nextRound() {
      if (Object.values(correctCounts).every(count => count >= 5)) {
        alert("ğŸ‰ ê²Œì„ ì¢…ë£Œ! ëª¨ë“  ë‹¨ì–´ë¥¼ 5íšŒ ì´ìƒ ë§ì·„ìŠµë‹ˆë‹¤.");
        return;
      }

      const germanList = document.getElementById('germanList');
      const meaningList = document.getElementById('meaningList');
      germanList.innerHTML = '';
      meaningList.innerHTML = '';

      const remainingWords = allWords.filter(w => wordCounts[w.german] < 5);
      const roundGerman = getRandomItems(remainingWords, 5);
      roundGerman.forEach(w => wordCounts[w.german]++);

      const matched = roundGerman[Math.floor(Math.random() * roundGerman.length)];
      const roundMeaning = getRandomItems(allWords.filter(w => w.german !== matched.german), 4);
      roundMeaning.push(matched);
      shuffle(roundMeaning);

      roundGerman.forEach(w => {
        const div = document.createElement('div');
        div.textContent = w.german;
        div.className = 'item';
        div.dataset.german = w.german;
        div.onclick = () => handleSelect('german', div);
        germanList.appendChild(div);
      });

      roundMeaning.forEach(w => {
        const div = document.createElement('div');
        div.textContent = w.meaning;
        div.className = 'item';
        div.dataset.meaning = w.german;
        div.onclick = () => handleSelect('meaning', div);
        meaningList.appendChild(div);
      });

      updateProgress();
    }

    function handleSelect(type, element) {
      if (type === 'german') {
        selectedGerman = element;
      } else {
        selectedMeaning = element;
      }

      if (selectedGerman && selectedMeaning) {
        const correct = selectedGerman.dataset.german === selectedMeaning.dataset.meaning;
        if (correct) {
          selectedGerman.classList.add('matched');
          selectedMeaning.classList.add('matched');
          correctCounts[selectedGerman.dataset.german]++;
        } else {
          selectedGerman.classList.add('wrong');
          selectedMeaning.classList.add('wrong');
        }
        selectedGerman = null;
        selectedMeaning = null;
        updateProgress();
      }
    }

    function getRandomItems(arr, n) {
      const copy = [...arr];
      shuffle(copy);
      return copy.slice(0, n);
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }
  </script>
</body>
</html>
